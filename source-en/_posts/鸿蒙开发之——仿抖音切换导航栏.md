---
title: 鸿蒙开发之——仿抖音切换导航栏
categories:
  - 开发
  - D-移动开发
  - HarmonyOS
tags:
  - HarmonyOS
abbrlink: 6f8c07dc
date: 2025-11-04 08:39:53
---
## 一 概述

```
本文介绍仿抖音切换导览栏：
 - 自定义滑动逻辑实现
 - 使用Swiper容器组件(推荐)
```

<!--more-->

## 二 自定义滑动逻辑实现

### 2.1 代码逻辑

1-触摸事件监听

```
Flex({ direction: FlexDirection.Row }) {
  ForEach(this.itemList, (item, index) => {
    FlexItem()
      .onTouch((event: TouchEvent) => {
        if (event.type === TouchType.Move) {
          // 计算滑动距离差
          const deltaX = event.touches.screenX - this.startX
          if (Math.abs(deltaX) > SWIPE_THRESHOLD) {
            this.handleSwipe(deltaX > 0 ? 'right' : 'left')
          }
        }
      })
  })
}
```

2-关键参数配置

```
const SWIPE_THRESHOLD = 50 // 滑动触发阈值
const ANIMATION_DURATION = 300 // 切换动画时长
```

3-状态管理逻辑

```
@State currentIndex: number = 0

handleSwipe(direction: 'left' | 'right') {
  if (direction === 'left') {
    this.currentIndex = (this.currentIndex + 1) % this.itemList.length
  } else {
    this.currentIndex = (this.currentIndex - 1 + this.itemList.length) % this.itemList.length
  }
}
```

4-完整代码

```
LazyForEach(this.topTabListData, (item: string, index) => {
  Stack() {
    if (this.currentIndex == 0) {
      CityPage() //同城
    } else if (this.currentIndex == 1) {
      FocusPage() //关注页
    } else if (this.currentIndex == 2) {
      RecommendPage() //推荐页
    }
  }
  .backgroundColor(Color.Gray)
  .width(Constants.FULL_SIZE)
  .height(Constants.FULL_SIZE)
  .onTouch((event: TouchEvent) => {
    let startX = event.touches[0].displayX;
    let startY = event.touches[0].displayY;
    if (event.type === TouchType.Move) {
      // 计算滑动距离差
      const deltaX = event.touches[0].displayX;
      -startX
      if (Math.abs(deltaX) > Constants.SWIPE_THRESHOLD) {
        this.handleSwipe(deltaX > 0 ? 'right' : 'left')
      }
    }
  })
}, (item: string, index) => JSON.stringify(item))

handleSwipe(direction: 'left' | 'right') {
    if (direction === 'left') {
      this.currentIndex = (this.currentIndex + 1) % this.topTabListData.totalCount()
    } else {
      this.currentIndex = (this.currentIndex - 1 + this.topTabListData.totalCount()) % this.topTabListData.totalCount()
    }
  }
```

### 2.2 效果图(有闪烁)

![][1]

## 三 使用Swiper容器组件(推荐)

### 3.1 代码

```
Swiper() {
  LazyForEach(this.topTabListData, (item: string, index) => {
    Stack() {
      if (this.currentIndex == 0) {
        CityPage() //同城
      } else if (this.currentIndex == 1) {
        FocusPage() //关注页
      } else if (this.currentIndex == 2) {
        RecommendPage() //推荐页
      }
    }
    .align(Alignment.Top)
    .backgroundColor(Color.Gray)
    .width(Constants.FULL_SIZE)
    .height(Constants.FULL_SIZE)
  }, (item: string, index) => JSON.stringify(item))
}
.loop(false)
.indicator(false)
.index(2) //显示第2个
.onChange(index => {
  this.currentIndex = index
})
```

### 3.2 效果图

![][2]



[1]:https://cdn.jsdelivr.net/gh/PGzxc/CDN/blog-hmos/hmos-swiper-define-1.gif
[2]:https://cdn.jsdelivr.net/gh/PGzxc/CDN/blog-hmos/hmos-swiper-use-2.gif

