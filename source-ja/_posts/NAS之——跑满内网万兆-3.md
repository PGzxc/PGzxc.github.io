---
title: NAS之——跑满内网万兆(3)
categories:
  - 开发
  - J-NAS
  - 跑满内网
tags:
  - 跑满内网
abbrlink: 8e2f1126
date: 2025-12-15 12:11:48
---
## 一 概述

```
本文介绍：4盘位及以上NAS万兆内网跑满方案
-硬件分析
-RAID与存储优化
-NAS设置
-PC设置
-性能预期
```

<!--more-->

## 二 硬件分析

### 2.1 NAS

```
-4盘位及以上，例如 DS920+、DS1522+
-必须支持万兆网口或可扩展 10GbE 网卡(通过PCIe扩展或SFP+模块)
```

### 2.2 硬盘

```
-7200 RPM HDD 单盘顺序读写约 150~200 MB/s
-10Gbps ≈ 1250 MB/s
-单盘 HDD 远远跑不满万兆，必须多盘组合 + RAID
```

### 2.3 PC

```
10GbE 网卡 + SSD
HDD 读写无法充分利用万兆带宽
```

### 2.4 网络设备

```
-10GbE 支持的交换机/直连
-光纤或 CAT6A/CAT7 网线
```

## 三 RAID 与存储优化

### 3.1 RAID类型选择

```
RAID0(性能最佳，无冗余)
RAID10(性能+冗余)
RAID5/6(安全性高，但写入略低)
目标带宽：10GbE = 1250 MB/s → 需要 6~8 块 HDD RAID0 才能接近满速
```

### 3.2 SSD Cache

```
-读写缓存 SSD(100~500GB)非常推荐
-可极大提升大文件写入和随机 I/O 性能
-HDD + SSD Cache 可以达到 单客户端接近万兆满速
```

### 3.3 多线程 I/O

```
SMB3/NFS 多线程
将大文件拆分多线程传输，充分利用多盘带宽
```

## 四 NAS 设置

### 4.1 网络

```
DSM → 控制面板 → 网络 → 启用 10GbE 网口
链路聚合可选(提高多客户端总带宽)
```

### 4.2 Jumbo Frame

```
设置 MTU 9000 → 提升大文件传输效率
PC端必须一致
```

### 4.3 文件服务

```
SMB3(支持多线程)或 NFS
建议开启异步写入和多连接优化
```

### 4.4 缓存

```
启用 SSD Cache(读写)
提升单客户端万兆内网带宽利用率
```

## 五 PC 设置

```
10GbE 网卡 + SSD
最新驱动
Jumbo Frame 9000
多线程文件传输()>=4线程)
```

## 六 性能预期

### 6.1 列表

|      配置       |          带宽能力           |      内网利用率       |
| :-------------: | :-------------------------: | :-------------------: |
|  4块 HDD RAID0  |        600~800 MB/s         | 10GbE 未跑满(≈50~65%) |
| 4块 HDD RAID10  |        300~400 MB/s         | 10GbE 未跑满(≈25~35%) |
| 6~8块 HDD RAID0 |        900~1200 MB/s        |  接近满速(≈90~100%)   |
| HDD + SSD Cache | 单客户端可达 1100~1250 MB/s |     万兆内网满速      |

### 6.2 核心结论

```
1、结论
单机 4盘 HDD 无法跑满万兆网络

2、需要：
-多盘 RAID0/RAID10
-或 HDD + SSD Cache
-多线程传输
```

## 七 总结

### 7.1 单客户端

```
-4盘 HDD + RAID0/RAID10 → 千兆/2.5G 内网满速没问题
-万兆内网 → 远低于带宽，需要 SSD Cache 或更多 HDD
```

### 7.2 多客户端

```
-4盘 HDD → 万兆网络可被多客户端共享利用
-RAID0/RAID10/SSD Cache 可以提升总吞吐量
```

### 7.3 NAS 配置要点

```
10GbE 网口
Jumbo Frame 9000
SMB3/NFS 多线程
SSD Cache(读写)
```

