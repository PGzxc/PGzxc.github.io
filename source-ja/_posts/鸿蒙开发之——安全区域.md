---
title: 鸿蒙开发之——安全区域
categories:
  - 开发
  - D-移动开发
  - HarmonyOS
tags:
  - HarmonyOS
abbrlink: 520bfbb9
date: 2025-12-04 09:11:58
---
## 一 什么是安全区域（Safe Area）

```
安全区域(Safe Area)是指 系统 UI(状态栏、导航栏、刘海、曲面边缘、Home 指示区等)不会遮挡的可显示区域。
在鸿蒙中，它由 AvoidArea 表示，通过 window.getWindowAvoidArea() 获取。
```

<!--more-->

## 二 设计目的

```
-避开状态栏、导航栏、圆角、折叠区域
-自动适配不同设备形态（手机、平板、折叠屏）
-支持横竖屏、沉浸式模式、分屏窗口
```

## 三 鸿蒙安全区域的类型

HarmonyOS 定义了三种 AvoidArea 类型：

|          类型          |                  含义                  |
| :--------------------: | :------------------------------------: |
|  AvoidAreaType.SYSTEM  | 系统区域（包含状态栏、导航栏、手势区） |
|  AvoidAreaType.CUTOUT  |           刘海或屏幕缺口区域           |
| AvoidAreaType.KEYBOARD |            软键盘显示时区域            |

你可以选择只避开部分区域，或全部避开

## 四 获取安全区域的三种方式

### 4.1 ArkUI 级别（推荐简写）

```
1、写法
Column() {
  Text('内容区域')
}
.safeArea(SafeAreaType.SYSTEM)

2、说明
自动避开状态栏 + 导航栏
对于折叠屏、平板、刘海屏，会自动重新计算
可以组合使用：.safeArea(SafeAreaType.SYSTEM | SafeAreaType.CUTOUT)
完全沉浸式显示：.safeArea(SafeAreaType.NONE)
```

### 4.2 Window API 级别（精确获取像素高度）

1、示例

```
import window from '@ohos.window';

async function getSafeArea(context) {
  const win = await window.getLastWindow(context)
  const area = await win.getWindowAvoidArea(window.AvoidAreaType.SYSTEM)
  console.log(`Top: ${area.topRect.height}, Bottom: ${area.bottomRect.height}`)
}
```

2、输出内容

|       属性        |        说明        |
| :---------------: | :----------------: |
|  topRect.height   |   状态栏区域高度   |
| bottomRect.height | 导航栏或手势区高度 |
|  leftRect.width   | 左边曲面屏避让宽度 |
|  rightRect.width  | 右边曲面屏避让宽度 |

### 4.3 动态监听安全区域变化（横竖屏 / 折叠屏切换）

```
1、代码
import window from '@ohos.window';

async function observeSafeArea(context) {
  const win = await window.getLastWindow(context)
  win.on('avoidAreaChange', (data) => {
    console.log('SafeArea changed:', JSON.stringify(data))
  })
}

2、常见触发场景：
-横竖屏切换
-软键盘弹出
-折叠屏展开 / 合拢
```

