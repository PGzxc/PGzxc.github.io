---
title: Android面试题——高级开发面试题3
categories:
  - 面试相关
  - Android面试题
tags:
  - Android面试题
abbrlink: 5c3392d
date: 2024-04-15 19:09:39
---
## 一 面试题整理

1. compose 和  view的区别
2. view是怎么渲染到屏幕上去的
3. 协程的轻量级体现在哪里

<!--more-->

## 二 面试题解答(ChatGPT)

### 2.1 compose 和  view的区别

在 Android 中，"Compose" 和 "View" 是两种不同的用户界面构建方式，具有一些重要区别：

#### Compose与View

1-**Compose**：

   - Jetpack Compose 是一种声明式的 UI 工具包，用于构建 Android 应用程序的用户界面。
   - Compose 使用 Kotlin 语言，并且采用了函数式编程的思想。你可以使用 Compose 提供的组件和函数来构建界面，而无需编写传统的 XML 布局文件。
   - Compose 允许你以声明式的方式描述用户界面，将界面的状态和布局逻辑紧密结合在一起，并且支持自定义 UI 组件的创建。

2- **View**：

   - 在传统的 Android 开发中，使用的是 View 来构建用户界面。View 是 Android 框架提供的一种 UI 组件，用于展示内容、接收用户输入等。
   - 使用 View 构建界面通常涉及编写 XML 布局文件，然后在 Java 或 Kotlin 代码中进行相关的操作和处理。
   - View 的布局和状态通常是分离的，而且 View 层级结构是以树形结构组织的。

#### 主要区别：

- Compose 是一种全新的 UI 构建方式，采用了声明式的编程范式，更加直观和灵活。
- View 是传统的 UI 构建方式，使用 XML 布局文件和 Java/Kotlin 代码来构建用户界面，较为繁琐。

#### 总结

- 随着 Jetpack Compose 的逐渐成熟和普及，它将成为 Android 开发中的主流方式，
- 而 View 仍然是一种可选的方式，特别是对于那些已经建立在 View 基础上的项目

### 2.2  view是怎么渲染到屏幕上去的

在 Android 中，View 是用户界面的基本构建块，它负责在屏幕上显示内容并处理用户的交互。当你在 XML 布局文件或代码中创建 View，并将其添加到视图层次结构中时，Android 系统将负责将这些 View 渲染到屏幕上。下面是一个简要的过程：

1. **View 的创建和配置**：
   - 在 XML 布局文件或代码中创建 View 对象，并配置其属性，如大小、位置、颜色等。这些属性决定了 View 在屏幕上的呈现方式。
2. **视图树的构建**：
   - Android 中的视图层次结构是由 View 组成的树形结构，根节点是 Activity 或 Fragment 中的根布局。
   - 当应用程序启动或界面需要更新时，Android 系统会遍历这棵视图树，并根据每个 View 的属性和布局参数来确定它们在屏幕上的位置和大小。
3. **测量（Measure）**：
   - 在绘制之前，Android 系统首先要确定每个 View 的大小。这个过程称为测量（Measure）。
   - 系统会从视图树的根节点开始，递归地遍历每个节点，并调用每个节点的 `measure()` 方法来计算其大小。
   - View 的测量结果通常由其内容、布局参数和父容器的约束条件决定。
4. **布局（Layout）**：
   - 一旦完成测量，Android 系统就会根据每个 View 的大小和布局参数来确定它们在屏幕上的位置。这个过程称为布局（Layout）。
   - 系统会从视图树的根节点开始，递归地遍历每个节点，并调用每个节点的 `layout()` 方法来确定其位置。
5. **绘制（Draw）**：
   - 绘制是将 View 的内容呈现到屏幕上的过程。每个 View 都有一个 `onDraw()` 方法，用于绘制其内容。
   - 当系统确定了每个 View 的位置和大小后，它会按照视图树的顺序调用每个 View 的 `onDraw()` 方法来绘制它们的内容。
   - View 的内容可以是文本、图像、形状等。
6. **渲染到屏幕**：
   - 一旦所有的 View 都完成了绘制，Android 系统会将它们合成一个完整的屏幕图像，并将其渲染到屏幕上显示给用户。

这个过程是由 Android 系统的 UI 框架负责管理和执行的，开发者通常无需直接干预。通过理解这个过程，可以更好地理解 Android 中用户界面的工作原理。

### 2.3 协程的轻量级体现在哪里

协程的轻量级体现在以下几个方面：

1. **低成本的线程切换**：
   - 协程是由开发者控制的轻量级线程，其调度和切换成本相对于操作系统线程来说更低。
   - 在协程内部，线程的切换是由协程库自行管理的，而不需要依赖操作系统的线程切换。
2. **避免阻塞**：
   - 协程可以通过挂起（suspend）和恢复（resume）的方式来实现非阻塞的并发操作。
   - 当一个协程被挂起时，它会释放执行线程，而不会阻塞整个线程池，从而提高了系统的并发性能。
3. **轻量级的上下文切换**：
   - 在协程内部，上下文切换的开销相对较小，因为它们可以在同一个线程内切换执行。
   - 当协程之间发生挂起和恢复操作时，上下文切换的开销通常要比操作系统线程的切换开销低很多。
4. **灵活的调度策略**：
   - 协程的调度策略可以由开发者自由选择和配置，例如可以选择使用单线程池、多线程池或者自定义的调度器。
   - 这种灵活性使得开发者可以根据应用程序的特性和需求来选择最适合的调度策略，从而提高了应用程序的性能和效率。

总的来说，协程的轻量级体现在其低成本的线程切换、避免阻塞、轻量级的上下文切换以及灵活的调度策略等方面，使得它成为一种高效、可扩展和易于使用的并发编程模型。