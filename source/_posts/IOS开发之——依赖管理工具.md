---
title: IOS开发之——依赖管理工具
categories:
  - 开发
  - D-移动开发
  - IOS
tags:
  - IOS
abbrlink: c7c8765
date: 2025-10-15 11:31:10
---
## 一 概述

```
在 iOS 开发中，
常用的依赖管理工具包括 SPM(Swift Package Manager)、CocoaPods 和 Carthage。

它们用于简化第三方库的集成、更新和版本控制，各具特点，适用场景也有所不同。
```

<!--more-->

## 二 3种依赖管理工具

### 2.1 SPM(Swift Package Manager)

```
1、简介
SPM 是苹果官方推出的依赖管理工具，与 Swift 一同发布。
自 Xcode 11 起已深度集成，是苹果重点推广的方案。

2、核心特点
-官方支持：与 Xcode 无缝集成，无需额外安装工具(Xcode 内置)。
-语言支持：主要支持 Swift，也兼容 C、C++、Objective-C(需配置模块映射)。
-依赖格式：通过Package.swift文件定义依赖，支持 Git 仓库地址或本地路径。
-集成方式：直接将依赖编译为模块，不修改项目文件结构，
通过 Xcode 的 “Add Package Dependency” 可视化操作添加。
-版本控制：支持语义化版本（如1.2.3）、分支(如main)或 commit 哈希。

3、优势：
-官方维护，与 iOS/macOS 生态兼容性最佳，尤其适配 Swift 新特性。
-无需额外工具链，新手入门门槛低。
-构建速度快，依赖冲突处理更简洁。

4、局限性：
-对老旧 Objective-C 库的支持不够完善(部分库需手动适配)。
-生态规模略小于 CocoaPods(但近年增长迅速)。
-不支持动态库与静态库的混合链接(部分场景下需额外配置)。

5、适用场景：
-以 Swift 为主的新项目。
-依赖官方库（如 SwiftUI、Combine）或优先支持 SPM 的第三方库(如 Alamofire、Kingfisher)。
-希望减少第三方工具依赖，保持项目简洁的团队。
```

### 2.2 CocoaPods

```
1、简介：
最老牌、生态最庞大的 iOS 依赖管理工具，由 Ruby 编写，2011 年发布，目前仍被大量项目使用。

2、核心特点：
-生态丰富：支持几乎所有主流 iOS 库(如 AFNetworking、MJRefresh)，
尤其对 Objective-C 库兼容性极佳。
-依赖格式：通过Podfile文件声明依赖，使用pod install命令安装。
-集成方式：会生成一个.xcworkspace文件，将项目与依赖库整合到同一工作区，依赖以静态库或动态库形式编译。
-版本控制：支持灵活的版本规则(如~> 1.2表示兼容 1.2.x)，并通过Podfile.lock锁定版本。

3、优势：
-生态最成熟，几乎所有第三方库都支持 CocoaPods。
-对 Objective-C 和 Swift 混编项目友好。
-支持自定义脚本(如post_install)，可在安装后修改项目配置(如调整 Build Settings)。

4、局限性：
-需要安装 Ruby 环境（macOS 默认自带，但版本问题可能导致兼容问题）。
-依赖解析和更新速度较慢(尤其大型项目)。
-会修改项目结构(生成 workspace)，可能与 Xcode 某些功能冲突(如 SwiftUI 预览)。

5、适用场景：
-依赖大量老旧 Objective-C 库的项目。
-团队已习惯 CocoaPods 工作流。
-需要复杂自定义配置（如修改编译选项）的场景。
```

### 2.3 Carthage

```
1、简介：
2014 年推出的轻量级依赖管理工具，定位 “去中心化”，主打 “不侵入项目” 的设计理念。

2、核心特点：
-非侵入式：仅负责将依赖编译为二进制框架(.framework)，不修改项目文件，需手动将框架添加到项目中。
-依赖格式：通过Cartfile声明依赖，使用carthage update命令构建。
-语言支持：支持 Swift 和 Objective-C，优先推荐动态框架（Dynamic Framework）。
-版本控制：支持 Git 仓库和语义化版本。

3、优势：
-不修改项目结构，对项目的 “污染” 最小。
-构建速度快(直接生成二进制框架，可缓存)。
-避免 CocoaPods 的 workspace 复杂问题。

4、局限性：
-生态规模较小（很多库不支持 Carthage）。
-需手动配置框架引用和链接（如添加到 “Linked Frameworks and Libraries”）。
-对静态库支持较弱，不适合纯静态库项目。

5、适用场景：
-希望保持项目纯净，不希望工具修改项目配置的团队。
-依赖的库支持动态框架，且数量较少。
-对构建速度有较高要求的项目。
```

## 三 3者对比总结

|    特性    |           SPM           |        CocoaPods         |      Carthage      |
| :--------: | :---------------------: | :----------------------: | :----------------: |
|  官方支持  |        是(苹果)         |         否(社区)         |      否(社区)      |
|  生态规模  |     中等(快速增长)      |           最大           |        较小        |
|   侵入性   |     低(不修改项目)      |    高(生成 workspace)    |   低(仅提供框架)   |
| 语言兼容性 | Swift 优先，兼容 C/ObjC |    全兼容(ObjC/Swift)    | 兼容，但偏向 Swift |
| 安装复杂度 |     无(Xcode 内置)      | 需安装 Ruby 和 CocoaPods |  需安装 Carthage   |
|  构建速度  |           快            |    较慢(尤其首次安装)    |   快(二进制缓存)   |

## 四 选择建议

```
-新项目优先考虑 SPM：官方支持、集成简单、未来趋势明确。
-依赖大量老旧库或 ObjC 库选 CocoaPods：生态最完善，兼容性无虞。
-追求项目纯净度或动态框架优先选 Carthage：适合小而精的项目。
-实际开发中，也可能混合使用(如主项目用 SPM，个别库用 CocoaPods)，但需注意依赖冲突问题。
```

