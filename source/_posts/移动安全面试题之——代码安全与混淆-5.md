---
title: 移动安全面试题之——代码安全与混淆(5)
categories:
  - 面试相关
  - 移动安全面试题
tags:
  - 移动安全面试题
abbrlink: 4882ba81
date: 2025-09-28 09:16:05
---
## 一 概述

```
本文题目来自于：
 - 面试招聘要求
 - 网友分享
```

<!--more-->

## 二  面试要求和面试题

```
1.未加密风险：未混淆的代码易被逆向，密钥可能被硬编码暴露
2.代码保护：
-ProGuard/R8 混淆（Android）；SwiftShield/iXGuard（iOS）
-安全编译：minifyEnabled、shrinkResources 移除无用代码/资源（Android）；LLVM优化（iOS）
```

### 三 面试题解答(仅供参考)

面试考点

```
1.未加密/未混淆风险：本地数据泄露、核心逻辑泄露、敏感信息暴露
2.代码混淆与压缩：保护算法、业务逻辑、敏感数据
3.硬编码风险：API Key、Token 等直接写入代码
4.防护措施：混淆、加密存储、HTTPS、反调试
5.特殊场景：银行、支付类应用安全与合规
```

1、 未混淆与未加密代码的风险

```
1、逆向工程：APK 可被 APKTool、JADX、JEB 反编译为可读代码（Android）；IPA被Hopper、Ghidra反编译（iOS）
2、本地数据泄露：未加密 SharedPreferences、数据库或文件在 Root/越狱 设备上可被读取
3、代码相关风险：
 -知识产权泄露：核心算法和业务逻辑被窃取
 -安全漏洞：硬编码的 API Key、Token、密码被提取
 -篡改与二次打包：注入恶意代码，重新发布

4、高风险场景：
银行、支付类应用易受中间人攻击或盗版，需满足 PCI-DSS 等合规要求
```

2、代码混淆的定义与重要性

```
1、定义：
将类、方法、变量重命名为无意义字符串，同时保持功能不变

2、功能：
-混淆：增加逆向难度
-压缩：移除无用代码，减小 APK/IPA 体积
-优化：提升性能

3、重要性：
保护核心算法、业务逻辑和敏感数据，降低泄露、篡改和漏洞利用风险

4、工具：
-ProGuard/R8：第三方工具，支持混淆、压缩、优化（Android）
-SwiftShield/iXGuard：支持Swift/Objective-C混淆（iOS）
```

3、硬编码的定义与风险

```
1、定义：
将 API Key、密码、服务器地址直接写入代码

2、风险：
-密钥暴露：反编译后被提取，导致非法访问
-难以更新：泄露后需重新发布，用户更新不及时
-不灵活：修改数据需重新编译，增加维护成本
```

4、防护措施

```
1、代码混淆与压缩
minifyEnabled true
shrinkResources true（Android）

自定义规则（proguard-rules.pro/Android）
-keep class com.example.models.** { *; }
-dontwarn okhttp3.**
-keepclassmembers class * { native <methods>; }

iOS：iXGuard YAML配置，混淆Swift类/方法

2、安全存储敏感数据
-Android Keystore：存储加密密钥
-Keychain/Secure Enclave（iOS）：存储密钥
-NDK + C++/Swift Native：将算法/密钥移至原生层
-服务器端获取密钥或通过环境变量/Gradle 注入 BuildConfig（Android）；Xcode Environment（iOS）

3、其他最佳实践
-HTTPS 传输：防止密钥拦截
-反调试/反篡改：检测 Root/越狱 或调试环境
-动态加载/运行时解密数据
-第三方加固服务（如腾讯御安全/Android；Arxan/iOS）

4、测试与验证
-测试 release 构建，确保反射/JNI 正常（Android）；Swift反射（iOS）
-使用 @Keep 注解保留特定代码（Android）；@objc dynamic（iOS）
-apkanalyzer 检查混淆效果（Android）；Hopper验证（iOS）
```

5、混淆可能导致的问题及解决

|                       问题                       |                           解决方法                           |
| :----------------------------------------------: | :----------------------------------------------------------: |
| 反射失败(如 Gson、Retrofit/Android；Codable/iOS) | 保留规则：-keep class com.google.gson.** { *; }（Android）；指定例外类（iOS） |
|                 JSON 序列化失败                  | 保留序列化类：-keep public class * implements java.io.Serializable { *; }（Android）；Swift Codable例外（iOS） |
|                   JNI 调用失败                   | 保留 native 方法或使用 @Keep 注解（Android）；Objective-C桥接（iOS） |
|                   第三方库冲突                   | 检查 proguard-rules.pro，排除不必要混淆（Android）；iXGuard配置（iOS） |

6、银行与支付类应用的特殊要求

```
1、重要性：
保护认证、加密逻辑，防止欺诈，满足 PCI-DSS 等合规

2、实现：
-启用 R8，配置 minifyEnabled/shrinkResources（Android）
-配置 proguard-rules.pro，保留必要库（Android）
-测试反射和序列化逻辑
-iOS：使用iXGuard混淆，结合App Attest完整性检查
```

7、总结要点

```
1.代码混淆：ProGuard / R8（Android），SwiftShield / iXGuard（iOS），R8/iXGuard 为默认高效选择
2.未混淆/未加密风险：暴露算法、密钥、数据，金融类应用风险高
3.硬编码危害：密钥暴露、难以更新
4.最佳实践：混淆 + 安全存储 + HTTPS + 反调试 + 测试确保安全与性能
```

