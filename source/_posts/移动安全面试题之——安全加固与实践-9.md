---
title: 移动安全面试题之——安全加固与实践(9)
categories:
  - 面试相关
  - 移动安全面试题
tags:
  - 移动安全面试题
abbrlink: fbe30c1c
date: 2025-09-29 10:01:28
---
## 一 概述

```
本文题目来自于：
 - 面试招聘要求
 - 网友分享
```

<!--more-->

## 二  面试要求和面试题

```
1.加固技术：DexGuard、360 加固等（Android）；iXGuard、Arxan（iOS）
2.安全更新：依赖库及时升级(OkHttp、Retrofit/Android；URLSession、Alamofire/iOS)，修复 CVE 漏洞
3.合规性：遵守 GDPR、CCPA 等隐私法规
```

### 三 面试题解答(仅供参考)

### 3.1 加固技术

1、APK/IPA加固及常见工具选择

```
1、定义：
APK/IPA加固通过混淆（obfuscation）、加密和壳注入（shelling）保护DEX/Mach-O文件和资源，防止反编译与篡改。

2、常见工具：
-DexGuard(商业，Guardsquare出品/Android)：
 支持高级控制流平坦化、字符串加密、防Hook、防调试，集成Gradle，付费。
 适用于高安全需求项目（如银行App）。
-iXGuard（商业/iOS）：支持Swift/Objective-C混淆、控制流保护、反调试，集成Xcode。
-360加固（免费云平台/Android）：支持多渠道签名、Walle多包合并，集成简单，适合中小团队，但依赖云服务，可能有隐私风险。
-Arxan（商业/iOS/Android）：跨平台加固，资源加密、防逆向。

3、选择建议：
-小项目/快速集成 → 360加固（Android），SwiftShield（开源/iOS）
-高安全需求/精细化控制 → DexGuard（Android），iXGuard（iOS）
```

2、如何集成DexGuard/iXGuard进行代码加固？

```
一、集成步骤（Android/DexGuard）
1、Gradle配置：
添加 classpath 'com.guardsquare:proguard-gradle:7.3.2'，启用 dexguard {}。

2、混淆规则：
使用 proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 
'proguard-rules.pro'，保留敏感类 -keep class com.example.Sensitive { *; }。

3、构建Release APK，并测试反逆向（APKTool验证）。

一、集成步骤（iOS/iXGuard）
1、Xcode配置：添加iXGuard脚本到Build Phases。
2、混淆规则：配置YAML文件，指定类/方法混淆、字符串加密。
3、构建IPA，并测试反逆向（Hopper验证）。

二、最佳实践：
结合R8优化（Android）/LLVM优化（iOS），监控构建时间（加固后+20%），
考虑硬化内存（如GrapheneOS malloc硬化/Android；iOS Secure Enclave）。
```

3、加固后如何处理签名冲突和多渠道打包？

```
使用 美团Walle 工具生成无签名 base.apk，再注入渠道包。360加固内置支持（Android）。
iOS：使用fastlane或Xcode Archive处理多签名，App Store Connect管理多渠道。

注意：加固后JNI调用可能崩溃，需白名单native方法（Android）；iOS注意dylib加载。
```

4、常见加固技术有哪些？

```
DEX/Mach-O文件加密/壳保护：运行时解密，防止静态反编译。
代码混淆：类、方法、变量名替换为不可读字符串。
字符串加密：保护API Key、URL等敏感信息。
反调试/反注入：检测调试器或外部代码注入。
完整性校验：哈希值校验防篡改。
```

5、DexGuard/iXGuard与ProGuard/SwiftShield的区别？

|   特性   |                DexGuard (本地加固)                 |          360加固/腾讯乐固 (云加固)          |    iXGuard (iOS本地加固)    |
| :------: | :------------------------------------------------: | :-----------------------------------------: | :-------------------------: |
|   类型   |            本地混淆/优化，构建阶段执行             |        云端/服务型加固，上传APK处理         |     本地混淆，Xcode集成     |
| 主要作用 | 代码混淆、控制流扁平化、字符串加密、防Hook、防调试 | DEX加壳、内存保护、反调试、防篡改、渠道打包 | Swift混淆、反调试、资源加密 |
| 集成方式 |           Gradle插件，开发者自行配置规则           |       上传APK到平台，由平台加固后下载       |     Xcode Build Phases      |
| 适用场景 |     需要精细控制混淆、对包体积敏感或性能要求高     |       快速、全面保护且接受DEX加壳方式       |        高安全iOS应用        |

6、DexGuard vs ProGuard（Android）；iXGuard vs SwiftShield（iOS）

```
ProGuard：基础代码混淆和压缩（Android）
DexGuard：在ProGuard基础上增加类加密、字符串加密、防Hook、防调试、防脱壳，更适合敏感逻辑保护
SwiftShield：开源iOS混淆工具
iXGuard：在SwiftShield基础上增加高级保护，如控制流混淆、反逆向。
```

7、APK/IPA加固对性能影响

```
轻微影响启动速度和运行时反调试检测，一般优化良好，影响较小。
iOS加固可能增加IPA大小。
```

### 3.2 安全更新

1、如何管理Android/iOS依赖库安全更新？以OkHttp/Alamofire为例

```
1、流程
Gradle指定版本：implementation 'com.squareup.okhttp3:okhttp:5.0.0-alpha.14'（Android）
Podfile指定版本：pod 'Alamofire', '~> 5.9'（iOS）
安全扫描：集成Snyk/OWASP工具，如 ./gradlew dependencyCheckAnalyze 检测CVE（Android）；Swift Package Manager扫描（iOS）
更新库版本并测试API兼容性
CI/CD自动化：推送更新PR

2、最佳实践：
最小化依赖（如Retrofit+OkHttp组合/Android；URLSession+Alamofire/iOS）
订阅官方更新
结合率限、防DDoS策略
检查 CVE 如 OkHttp CVE-2023-3635。
```

2、什么是CVE？如何修复Android/iOS App中的CVE漏洞？

```
1、定义：
CVE (Common Vulnerabilities and Exposures)，NIST维护的漏洞编号

2、修复步骤：
-查询NVD数据库确认影响
-更新库（如Retrofit/OkHttp补丁版本/Android；Alamofire/iOS）
-静态分析（MobSF）、动态测试（Burp Suite）
-发布热更新（Tinker/Android；App Store/iOS）
使用 Dependabot 自动 PR。
```

3、Retrofit/Alamofire升级后的兼容性与安全测试

```
升级前：JUnit mock测试端点（Android）；XCTest（iOS）
升级后：验证Gson解析、防JSON注入，启用OkHttp CertificatePinner（Android）/URLSession Pinning（iOS）防MITM
测试：Postman模拟CVE场景
实践：版本锁定+定期审计，结合SecurityState API查询补丁级
```

4、及时升级依赖库的重要性

```
修复安全漏洞，防止数据泄露、MITM攻击、DoS
获取性能优化、新功能
保持与最新Android/iOS系统兼容
```

5、Android/iOS开发中CVE管理实践

```
关注官方渠道（Android安全公告、GitHub仓库/Android；iOS Security Updates）
CI/CD集成依赖分析工具（OWASP Dependency-Check）
及时升级库，必要时采用缓解措施
确保自定义网络配置安全（SSLSocketFactory/HostnameVerifier/Android；URLSession/iOS）
```

### 3.3 合规性与隐私保护

1、Android/iOS App初步合规做法

```
数据映射：标识PII（位置、设备ID等）
用户同意：Google Consent SDK弹窗（Android），AppTrackingTransparency（iOS），隐私政策链接
数据最小化与加密：SharedPreferences加密，匿名化分析（Android）；Keychain、Secure Enclave（iOS）
第三方SDK审计：AppCensus检查合规
Android 13+/iOS 18+隐私沙箱可辅助自动合规
```

2、跨境数据传输设计（GDPR）

```
-数据分类：敏感数据使用SCCs
-技术保障：TLS 1.3、EU-US Data Privacy Framework认证
-用户告知与撤回
-日志审计与DPIA报告
-Android实现：WorkManager定时同步，BCRs支持多国集团
-iOS：BackgroundTasks定时同步
```

3、用户删除权处理（CCPA）

```
API端点验证身份，删除本地与云端数据
48小时内响应并通知用户
法律保留例外（如审计日志）
测试：JUnit模拟请求（Android）；XCTest（iOS）
最佳实践：OneTrust SDK自动化，结合GDPR“被遗忘权”
```

4、隐私合规核心实践

```
-权限管理与同意：请求敏感权限前获得明确同意
-透明隐私政策：应用内提供清晰说明
-用户权利实现：支持删除/访问个人数据
-数据最小化和去标识化：只收集必需数据，尽量匿名化
-第三方SDK审查：确保其收集行为合法、合规
```

5、数据保护实现

```
-存储：EncryptedSharedPreferences / SQLCipher（Android）；Keychain / Secure Enclave（iOS）
-传输：HTTPS/TLS
-日志与缓存：匿名化/脱敏
-安全审计与合规检查：定期执行
```

