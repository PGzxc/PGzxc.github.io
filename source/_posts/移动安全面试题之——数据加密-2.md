---
title: 移动安全面试题之——数据加密(2)
categories:
  - 面试相关
  - 移动安全面试题
tags:
  - 移动安全面试题
abbrlink: 425fba25
date: 2025-09-28 09:04:12
---
## 一 概述

```
本文题目来自于：
 - 面试招聘要求
 - 网友分享
```

<!--more-->

## 二  面试要求和面试题

```
数据加密方案
1.对称加密：AES（AES-256-GCM）和非对称加密：RSA（密钥交换/签名）
2.密钥管理：
-Android Keystore（硬件支持，保护私钥/证书）
-iOS Keychain/Secure Enclave（系统凭据管理，硬件隔离）
3.数据存储加密：
-文件级加密（FBE）、全盘加密（FDE/Android）
-EncryptedSharedPreferences（敏感配置/Android）
-SQLCipher（数据库加密/Android/iOS）
-Secure Enclave（硬件隔离存储/iOS）
```

### 三 面试题解答(仅供参考)

### 3.1 对称加密和非对称加密

Q1：AES-256-GCM 在 Android/iOS 中的应用与实现？

```
1、应用场景：
本地存储（文件、SharedPreferences/Android；文件、UserDefaults/iOS）、网络传输（Token、用户凭据）

2、优点：高效，支持 AEAD，保证机密性 + 完整性

3、实现：
-Cipher 算法设为 AES/GCM/NoPadding（Android）；CommonCrypto（iOS）
-密钥由 Android Keystore/Secure Enclave 生成并安全存储
-使用随机 IV（与密文一起保存）

4、注意事项：
校验 GCM 标签、定期轮换密钥
```

Q2：RSA 在 Android/iOS 安全中的应用及与 AES 的结合？

```
1、用途：
-密钥交换（传输 AES 会话密钥）
-数字签名（验证来源与完整性）

2、特点：安全性强但性能低，不适合大数据
3、实现：KeyPairGenerator 生成 RSA 密钥对，存储于 Keystore（Android）；SecKeyGeneratePair（iOS）
4、注意事项：使用 ≥2048 位密钥，避免硬编码公钥，最好配合 TLS
```

Q3：什么是对称加密？常见算法有哪些？

```
1、定义：同一密钥用于加密和解密。
2、优点：加解密速度快，适合大数据量。
3、缺点：密钥分发与存储存在风险。

4、常见算法：
-AES（推荐，尤其是 AES-256-GCM）。
-DES、3DES（已逐步淘汰，安全性不足）。
```

Q4、AES-256-GCM 和 AES-CBC 有何区别？

```
AES-CBC：仅保证机密性，缺乏完整性校验，易受填充攻击。
AES-GCM：认证加密（AEAD），机密性 + 完整性，安全性更高。
推荐：AES-256-GCM 作为当前最佳实践。
```

Q5、RSA 的主要作用是什么？

```
密钥交换：分发会话密钥。
数字签名：验证来源与完整性。
局限性：性能低，无法直接处理大数据。
```

Q6、为什么需要 RSA + AES 混合加密？

```
1、原因：
-RSA 适合小数据（如密钥传输）。
-AES 适合大数据（如会话通信）。

2、典型流程：
-客户端生成随机 AES 密钥。
-用 RSA 公钥加密 AES 密钥并发送给服务器。
-服务器用 RSA 私钥解密，获取 AES 密钥。
-后续通信用 AES 进行高效加密。

3、优势：
兼顾 安全性（RSA）与 性能（AES）。
```

Q7、对称加密和非对称加密的区别及如何协同工作？

|   特性   |                   对称加密 (AES)                   |  非对称加密 (RSA)  |
| :------: | :------------------------------------------------: | :----------------: |
| 密钥使用 |                      同一密钥                      |    公钥 + 私钥     |
|   速度   |                   快，适合大数据                   |   慢，适合小数据   |
|  安全性  |                    密钥分发困难                    |    密钥分发简单    |
| 常见场景 |                 文件加密、数据传输                 | 密钥交换、数字签名 |
| 协同工作 | HTTPS 中：RSA 负责密钥协商，AES 负责高效加密通信。 |                    |

### 3.2 密钥管理

Q1、什么是 Android Keystore/iOS Secure Enclave？有何特点与应用场景？

```
1、定义：
应用级硬件安全存储系统，密钥存储于 TEE（可信执行环境）或 SE（安全元件），不可导出（Android）；独立芯片（iOS）

2、特点：
-所有加密/签名操作在安全硬件内执行
-支持 RSA、AES、EC 等算法
-可限制密钥用途（如仅限签名/加密）

3、适用场景：
-存储 AES 密钥（如 EncryptedSharedPreferences/Android；文件加密/iOS）
-存储 RSA/EC 密钥（如数字签名、TLS 客户端认证）

3、优点：
-硬件级保护，防 Root/越狱/逆向提取
-可绑定生物识别或解锁方式

4、注意事项：
-建议定期轮换密钥
-生成时设置访问限制（如仅在解锁状态下使用）
```

Q2、什么是 Android/iOS KeyChain？适用场景是什么？

```
1、定义：系统级凭据管理服务，统一管理用户证书和私钥。

2、特点：
-需用户授权访问，应用不可直接操作私钥。
-适合跨应用共享证书/凭据。

3、适用场景：
-系统级证书（VPN、Wi-Fi、企业证书）。
-需要系统信任或共享的场景。

4、优点：
-集中管理，用户可控。
-适合企业应用或安全通信。

5、注意事项：
调用 API 时需用户交互，可能影响体验。
```

Q3、Android Keystore 与 iOS Secure Enclave/Keychain 的区别？

|  对比点  | Keystore（Android应用级） | Secure Enclave/Keychain（iOS系统级） |
| :------: | :-----------------------: | :----------------------------------: |
| 存储内容 |      AES/RSA 等密钥       |         用户证书、凭据/私钥          |
|  安全性  |  硬件隔离，密钥不可导出   |         芯片隔离，需用户授权         |
| 典型场景 |   数据加密、签名、认证    |      VPN、企业证书、客户端认证       |
| 用户交互 |       无需用户交互        |             必须用户同意             |

### 3.3 数据存储加密

Q1、Android/iOS 中如何安全存储敏感数据（如 Token、密码）？

```
1、小型数据：
使用 EncryptedSharedPreferences（AES-256-GCM 加密，密钥由 Keystore 管理/Android）；Keychain（iOS）

2、数据库：
使用 Room + SQLCipher（AES-256 加密 SQLite/Android）；Core Data + SQLCipher（iOS）

3、文件存储：
使用 Cipher + FileOutputStream 进行 AES 加密，存储在 getFilesDir()(Android)；
CommonCrypto + FileManager（iOS）
利用 Android 9+ 默认启用的 文件级加密（FBE） 和 全盘加密（FDE）；iOS Data Protection

4、硬件隔离：
使用 TEE（Android）或 Secure Enclave（iOS）存储密钥

5、注意事项：
-不存储明文密码，推荐使用 bcrypt/Argon2 哈希
-密钥应存放在 Keystore/Secure Enclave 中
-定期审计存储逻辑，遵循 OWASP 移动安全指南
```

Q2、FBE 和 FDE 的区别？开发中如何应用？

2-1、对比

|   特性   |   文件级加密(FBE,File-Based Encryption)    | 全盘加密(FDE,Full-Disk Encryption) |
| :------: | :----------------------------------------: | :--------------------------------: |
|   定义   |       每个文件独立加密，支持不同密钥       |      整个存储分区使用单一密钥      |
|   优势   | 灵活，支持 Direct Boot(部分功能解锁前可用) |         简单，适合早期设备         |
|   缺点   |     配置复杂，需确保文件存储在私有目录     |    解锁前无法访问数据，灵活性差    |
| 适用场景 |      Android 7.0+ 默认启用，现代设备       |         早期 Android 设备          |

iOS：默认Data Protection，类似FBE

2-2、开发实践

```
-FBE：无需额外配置，系统自动处理，确保敏感文件存放在私有目录（Android）
-FDE：通过 DevicePolicyManager 检查设备加密状态，适用于旧设备（Android）
-与 EncryptedSharedPreferences/Keychain 和 SQLCipher 结合使用增强安全性
-iOS：使用NSFileProtectionComplete
```

Q3、SQLCipher 的原理和性能如何？

```
1、工作原理：
使用 AES-256 加密/解密 SQLite 数据库文件（Android/iOS）

2、密钥存储：
应存储在 Keystore/Secure Enclave 中

3、性能开销：
-加密和解密操作带来一定开销，尤其在大数据量场景下
-优化建议：只加密敏感字段，平衡性能与安全性
```

Q4、硬件安全模块：Secure Enclave 与 TEE的作用对比？

```
1、Secure Enclave（iOS）：
独立安全芯片，处理密钥/生物识别，主系统无法访问原始数据。

2、TEE（Android）：
类似机制，提供可信执行环境，保护密钥和敏感操作。

3、作用：
存储密钥/生物识别数据。
在隔离环境中执行认证操作，即使主系统被攻破也能保护数据。
```

Q5、iOS 如何安全存储敏感数据？

```
Keychain：系统级凭据存储（账号、密码、证书），自动加密。
Secure Enclave：硬件隔离，存储密钥，绑定 Face ID / Touch ID。
文件系统加密：默认启用 Data Protection Class，设备锁定时文件不可访问。
```

Q6、数据存储安全的核心面试要点是什么？

```
1、绝不明文存储 敏感数据（Token、密码）。

2、Android：
-小型数据 → EncryptedSharedPreferences
-数据库 → SQLCipher
-密钥管理 → Keystore

3、iOS：
-Keychain + Secure Enclave
-系统级文件加密

4、实践原则：
定期审计 → 遵循 OWASP → 结合硬件安全模块。
```

