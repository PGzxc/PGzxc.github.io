---
title: 鸿蒙开发之——常见状态管理
categories:
  - 开发
  - D-移动开发
  - HarmonyOS
tags:
  - HarmonyOS
  - 状态管理
abbrlink: 5dd3d8ea
date: 2026-02-19 08:00:45
---
## 一 概述

```
鸿蒙主流状态管理 = ArkUI 状态装饰器 + 单向数据流
中大型项目：UI 状态在组件，业务状态在 ViewModel/Store
```

<!--more-->

## 二 几种状态管理对比

|  平台   |       核心        |
| :-----: | :---------------: |
|   RN    |   JS 全局 Store   |
| Flutter |     Widget 树     |
| Android |     ViewModel     |
|  鸿蒙   | ArkUI 状态驱动 UI |

说明：ArkUI 本身就是状态驱动框架

## 三 状态管理

### 3.1 ArkUI 内置状态管理(最常用)

1-@State(组件私有状态)

```
1-代码
@State count: number = 0;
Button('+')
  .onClick(() => {
    this.count++;
  });

2-特点
-自动刷新 UI
-生命周期随组件

3-说明：
类似 Flutter setState / SwiftUI @State
```

2-@Prop(父 → 子传值)

```
1-代码
@Prop title: string;

2-说明
单向数据流，子组件不可直接修改
```

3-@Link(双向绑定)

```
1-代码
@Link count: number;

2-说明
慎用，容易造成状态耦合
```

4-@Provide / @Consume(跨组件)

```
1-代码
@Provide('user') user: User;
@Consume('user') user: User;

2-类似
-RN Context
-Flutter InheritedWidget

3-说明
滥用会导致隐式依赖
```

### 3.2 全局/应用级状态(重点)

1-AppStorage(全局状态)

```
1-代码
AppStorage.SetOrCreate('token', '');
@StorageLink('token') token: string;

2-特点
-全局共享
-支持持久化

3-场景：
适合登录态 / 用户信息
```

2-LocalStorage(页面级)

```
1-代码
let storage = new LocalStorage();
@LocalStorageLink('count') count: number;

2-说明
页面级状态共享
```

### 3.3 企业级做法(非常重要)

1-ViewModel/Store 模式(推荐)

```
1-说明
ArkUI 本身不限制你如何组织业务状态

2-示例(简化)
//定义
class CounterViewModel {
  state = {
    count: 0
  };

  increment() {
    this.state.count++;
  }
}
//调用
@State vm: CounterViewModel = new CounterViewModel();

3-推荐模式
UI（ArkUI）
  ↓
ViewModel
  ↓
Service / Repository
```

### 3.4 单向数据流(进阶)

1-MVI / Redux 思想(可选)

```
1-流程
Action → Reducer → State → UI

2-说明
-鸿蒙官方未强制
-复杂业务项目常见
```

## 四 鸿蒙状态管理方案对比

|    方案    |  作用域  | 推荐指数 |
| :--------: | :------: | :------: |
|   @State   |   组件   |  5颗星   |
|   @Prop    |   父子   |  5颗星   |
|  @Provide  |  跨组件  |  3颗星   |
| AppStorage |   全局   |  4颗星   |
| ViewModel  |  业务层  |  5颗星   |
| Redux/MVI  | 复杂业务 |  4颗星   |

## 五 和其他平台的对照

|   思想   |    RN    | Flutter  |  Android  |   iOS    |    鸿蒙    |
| :------: | :------: | :------: | :-------: | :------: | :--------: |
| 局部状态 | useState | setState | remember  |  @State  |   @State   |
| 父子传递 |  props   |  widget  |  params   | @Binding |   @Prop    |
| 全局状态 | Zustand  | Riverpod | StateFlow |  EnvObj  | AppStorage |
|  Redux   |   RTK    |   Bloc   |    MVI    |   TCA    |    MVI     |

## 六 实战选型建议

### 6.1 小型页面

```
@State + @Prop
```

### 6.2 中型应用

```
@State
 + ViewModel
 + AppStorage（少量）
```

### 6.3 大型 / 企业项目

```
ViewModel / Store
 + 单向数据流（MVI）
 + ArkUI 只负责渲染
```

### 6.4 不推荐

```
所有状态都丢 AppStorage
大量使用 @Link
UI 里写业务逻辑
```

## 七 一句话总结

```
鸿蒙状态管理不是选库，而是用好 ArkUI 的状态装饰器
```

