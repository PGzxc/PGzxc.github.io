---
title: 鸿蒙面试题——高频面试题之系统(4)
categories:
  - 面试相关
  - Harmony面试题
tags:
  - Harmony面试题
abbrlink: 2a2af4ce
date: 2025-09-19 15:27:34
---
## 一 概述

```
本文题目来自于：
 - 面试招聘要求
 - 网友分享
```

<!--more-->

## 二 高频常见问题

### 2.1 面试要求

```
1.系统能力(系统级API，如文件访问、相机、位置、网络、通知、媒体播放等)
2.分布式能力开发：分布式数据(共享)，分布式软总线、分布式api
3.轻量化服务:原子化服务、卡片服务
```

## 三 高频面试题及解答(仅供参考)

### 3.1 系统能力(系统级API，如文件、相机、位置、网络、通知、媒体播放等)

面试考点

```
掌握系统级 API（文件、相机、位置、网络、通知、媒体播放等）的使用与权限管理
```

1、系统能力

```
HarmonyOS 提供对硬件和系统功能的抽象 API（@ohos.* 模块），
涵盖文件访问、相机、位置、网络、通知、媒体播放等，支持分布式多设备场景。
```

2、HarmonyOS中如何申请系统级API权限（如相机、位置、网络）？

```
1、配置权限：在 module.json5 中声明，例如：

"reqPermissions": [
  "ohos.permission.CAMERA",
  "ohos.permission.LOCATION"
]

2、动态申请：
permissionManager.requestPermissionsFromUser 运行时弹窗请求。

3、权限类型：
-静态权限：安装时自动授予。
-动态权限：用户确认后生效，支持“一次性 / 仅本次 / 拒绝”。
```

3、文件访问 API

```
1、模块：
@ohos.fileio

2、操作流程：
const fd = fileio.open(path, mode);
fileio.write(fd, data);
const content = fileio.read(fd);

3、权限：
ohos.permission.READ_MEDIA / ohos.permission.WRITE_MEDIA

4、特性：
-应用沙箱机制，默认只能访问自身目录。
-跨设备需结合分布式数据管理。
```

4、相机 API

```
1、模块：
@ohos.multimedia.camera

2、调用流程：
-获取设备：cameraManager.createCamera
-创建会话，调用 camera.startCapture 开启预览/拍照/录制

3、权限：
ohos.permission.CAMERA

4、兼容性：
-通过 systemCapability 检查硬件支持情况。
-不支持时可回退 WebRTC 或提示用户。
```

5、位置服务

```
1、模块：
@ohos.geoLocationManager

2、操作：
-getLocationByType 获取当前位置
-监听更新：locationClient.on

3、权限：
ohos.permission.LOCATION

4、特性：
-支持高精度（GPS）和低精度（网络）。
-默认支持隐私模糊化，用户可控制定位精度。
```

6、通知API

```
1、模块：@ohos.notificationManager
2、集成示例：notificationManager.publish(notificationRequest);
3、权限：ohos.permission.NOTIFICATION
4、注意点：后台通知需配合前台服务，否则可能被系统终止。
```

7、媒体播放 API

```
1、模块：@ohos.multimedia.media

2、调用流程：
-avPlayer.createPlayer() 创建播放器
-avPlayer.prepare(source) 加载资源（支持本地/网络 URL）
-avPlayer.play() 播放

3、权限：网络播放需 ohos.permission.INTERNET

4、对比：
-MediaPlayer：适合音频播放，轻量。
-AVPlayer：支持音视频流与解码器扩展，功能更全面。
```

### 3.2 分布式能力开发：分布式数据(共享)，分布式软总线、分布式api

面试考点

```
分布式数据（共享同步）
分布式软总线（跨设备通信）
分布式 API（硬件/能力共享）
```

1、分布式软总线(DSoftBus)

```
1、定义：
连接多设备的虚拟总线，支持自发现、自组网，高带宽、低时延传输。

2、核心功能：
-任务总线：分发跨设备任务（如应用迁移）。
-数据总线：传输数据（文件共享、消息）。
-连接管理：维护设备状态和会话。

3、实现原理：
基于 Wi-Fi、蓝牙、NFC 等混合协议，动态选择最优链路。
HarmonyOS 5.1+ 下连接时间 <0.5s，传输速率显著提升。

4、API：
@ohos.distributedSoftbus → createSession 建立会话。
```

2、如何使用分布式数据共享(DDS)实现多设备数据同步？

```
1、定义：
允许多设备间同步 KV 数据或关系型数据库，支持最终一致性。

2、流程：
-注册存储（如 rdbStoreConfig 设置分布式模式）。
-创建 KV 实例：DistributedKVManager。
-使用 put/get 存取数据，系统自动同步。

3、冲突处理：基于 CRDT 算法，保证最终一致性。
4、权限：ohos.permission.DISTRIBUTED_DATASYNC
5、应用场景：手机与手表间同步健身数据、笔记应用多端同步
```

3、分布式API调用流程及注意事项？

```
1、作用：封装跨设备能力调用，实现硬件和功能共享。

2、流程：
-设备认证 → authManager 验证身份。
-建立连接 → 软总线会话。
-API 调用 → 如 @ohos.distributedHardware 虚拟化远端摄像头/振动器。

3、注意点：
-网络分区：需本地缓存 + 重试机制。
-安全：加密传输，权限校验。
-性能：关注时延与功耗。
```

4、分布式能力中，如何处理设备离线场景？

```
数据缓存：DDS 支持本地存储，重连后自动同步。
设备监听：注册 onDeviceOnline/onDeviceOffline，动态调整策略。
设计原则：弱一致性优先用户体验，例如音乐跨设备无缝切换。
```

5、软总线 vs 传统蓝牙

```
协议支持：软总线集成多协议（Wi-Fi/蓝牙/NFC），蓝牙仅限点对点。
性能：软总线 <0.5s 连接，高带宽低延时；蓝牙适合小数据传输。
功能：软总线支持任务分发、资源共享，蓝牙局限于数据交换。
典型场景：软总线用于超级终端/多屏协作；蓝牙常用于耳机、键盘。
```

6、分布式开发流程(官方指南)

```
数据同步：配置 DDS（KV/关系型存储）。
设备发现：discoverDevices() 搜索周边设备。
设备绑定：bindDevice() 认证（PIN/二维码）。
获取信息：getDeviceInfo() 查询设备能力。
设备状态：监听 onDeviceStateChange。
```

7、分布式API如何在Ability中实现跨设备调用？

```
1、方式：使用 @ohos.ability.distributedAbilityManager 调用远端 Ability。

2、调用示例：
startAbility({
  deviceId: 'remoteId',
  bundleName: 'com.example.remote',
  abilityName: 'RemoteAbility'
})


3、原理：基于 Want + 软总线，实现跨设备 RPC 调用。

4、注意点：
-处理失败回调（如 onConnectFailed）。
-确保远端权限与安全校验。

5、场景：手机调用手表相机，直接获取预览流。
```

### 3.3 轻量化服务:原子化服务、卡片服务

面试考点

```
1.原子化服务（免安装、点即用）与传统服务的区别
2.卡片（Form）的开发流程与生命周期
3.跨设备流转实现方式
4.卡片与原子化服务的集成优势
5.安全与性能优化
6.分发与发布流程
```

1、原子化服务是什么？与普通服务的区别？

```
1、定义：HarmonyOS 提供的免安装、轻量级应用形态，支持手机、穿戴、大屏等多端运行。
2、核心特性：免安装、卡片直达、跨设备流转。

3、区别：
-运行环境：普通服务依赖 App 容器，原子化服务由系统框架直接管理。
-交互方式：原子化服务支持卡片直达与分布式流转；普通服务更适合后台持久运行。
-应用场景：天气、健身、IoT 场景等
```

2、卡片（Form）的开发流程

```
配置：在 module.json5 声明卡片信息（name、src 等）。
数据绑定：实现 FormBindingData，动态更新卡片。
生命周期回调：onFormBind / onFormUpdate。
权限：ohos.permission.FORM_PROVIDER。
示例：天气卡片实时更新温度。
```

3、跨设备流转的实现

```
分布式软总线：注册 distributedAbility，调用 continueAbility 迁移上下文。
数据同步：结合 DDS（分布式数据服务）保持一致性。
流程：源设备注册 → 连接目标设备 → 上下文迁移 → 目标设备接管。
示例：手表记录运动 → 手机继续查看详细分析。
```

4、卡片与原子化服务的集成优势

```
直达体验：卡片在桌面/负一屏直显，减少操作层级。
多端适配：适配不同屏幕（手机、手表、车机）。
生态联动：结合智慧搜索、锁屏直达，提升用户粘性。
示例：音乐卡片在手表可播放控制，点击跳转手机端完整应用
```

5、原子化服务的安全与性能优化？

```
安全：独立沙箱隔离，最小化权限申请（如 ohos.permission.ATOMIC_SERVICE）。
性能：轻量设计（内存 <10MB）、懒加载 UI、分布式缓存。
测试：在 DevEco Studio 模拟多设备场景，验证流转与性能。
```

6、发布与分发

```
配置：在 module.json5 设置 "type": "atomicService"。
分发：通过 AppGallery 免安装直达，支持自动化审核与版本管理
```

7、通信方式

```
卡片 ↔ 后台：通过 FormBindingData 或事件订阅更新。
跨设备通信：DDS 数据同步 + 软总线消息传递。
示例：消息卡片展示通知，点击触发后台 ServiceAbility 逻辑。
```

8、多设备适配

```
UI：ArkUI 响应式布局，适配不同终端。
分布式：软总线 + DDS 实现多端无缝运行。
示例：新闻服务在手机显示全文，在手表显示精简摘要卡片。
```

